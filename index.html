<!DOCTYPE html>
<html>
<head>
  <title>TON Auth</title>
  <!-- ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ Ñ‡ÐµÑ€ÐµÐ· unpkg -->
  <script src="https://unpkg.com/@tonconnect/sdk@latest/dist/tonconnect-sdk.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@telegram/web-app@latest/dist/telegram-web-app.js"></script>
  <style>/* Ð²Ð°Ñˆ CSS */</style>
</head>
<body>
  <h1>ðŸ”‘ Connect Tonkeeper</h1>
  <button id="connect-button">Connect Wallet</button>
  <p id="status">Status: Loading scripts...</p>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const status = document.getElementById('status');

      // ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐº
      if (!window.Telegram?.WebApp) {
        status.textContent = "Error: Telegram WebApp not loaded";
        return;
      }

      if (typeof TonConnect === 'undefined') {
        status.textContent = "Error: TonConnect SDK not loaded";
        return;
      }

      // ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ ÐºÐ¾Ð´
      const connector = new TonConnect.TonConnect({
        manifestUrl: 'https://tonkeeper-bot.vercel.app/tonconnect-manifest.json'
      });

      document.getElementById('connect-button').addEventListener('click', async () => {
        try {
          status.textContent = "Connecting...";
          const wallets = await connector.getWallets();
          await connector.connect(wallets[0]);
        } catch (err) {
          status.textContent = `Error: ${err.message}`;
        }
      });

      connector.onStatusChange((wallet) => {
        if (wallet) {
          Telegram.WebApp.sendData(wallet.account.address);
          Telegram.WebApp.close();
        }
      });

      status.textContent = "Ready to connect!";
    });
  </script>
</body>
</html>